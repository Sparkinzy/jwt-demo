<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>demo for jwt</title>
	<link href="//cdn.bootcss.com/bootstrap/3.3.6/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>
	
<script src="//cdn.bootcss.com/jquery/2.1.2/jquery.min.js"></script>
<script src="//cdn.bootcss.com/store.js/1.3.20/store.js"></script>
<script type="text/javascript">
((function(){
	// $.ajax({
	// 	url: 'http://localhost/composer/demo_for_jwt.php',
	// 	type: 'GET',
	// 	dataType:'json',
	// })
	// .done(function(data) {
	// 	store.set('jwt',data.jwt);
	// 	console.log(data.jwt);
	// 	console.log('get ok');
	// })
	// .fail(function() {
	// 	// console.log("error");
	// })
	// .always(function() {
	// 	// console.log("complete");
	// });

	setTimeout(function(){
		var jwt = store.get('jwt');
		console.log('get jwt:'+jwt);
		$.ajax({
			url: 'http://localhost/composer/demo_for_jwt_simple.php',
			type: 'POST',
			headers:{
				'Authorization':'Bearer '+jwt,
			}
		})
		.done(function(data) {
			console.log("post success");
		})
		.fail(function() {
			// console.log("error");
		})
		.always(function() {
			// console.log("complete");
		});
		
	},0);
})());
</script>
</body>
</html>